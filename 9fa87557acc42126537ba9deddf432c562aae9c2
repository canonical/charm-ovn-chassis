{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8b7e05f6_ae784c85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "Added some inline comments.",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7aeed6a5_88865c5e",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "considering permissions can be a headache in what you are trying to achieve (root process stores stats to be read by non-root process), I think you should capture the file permissions error and handle it gracefully.\n\nanother thing, should this acquire a lock on the file?",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a197448_942bfc5e",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "yeah the lock point is a good one although if the file is no good it just raises a ValueError and we move on until next check",
      "parentUuid": "7aeed6a5_88865c5e",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "847a0d3e_9309251e",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-12-06T21:08:33Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "3a197448_942bfc5e",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "535078cc_9fb79b66",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "so this tests for stale data in the report, cool",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56e04d7d_fa02a934",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "this should exit with a non-zero code",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f761e9b2_61def504",
        "filename": "src/files/nagios/nrpe_check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-12-02T16:04:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "56e04d7d_fa02a934",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b24c9abb_86390a3e",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "is this available in the ovn-chassis units?",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7ace9dd_a2ef0df4",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "yes, it gets installed by the charm (in this patchset)",
      "parentUuid": "b24c9abb_86390a3e",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fbdc9c6_78e3d654",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-10-02T18:16:15Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a7ace9dd_a2ef0df4",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48a9aff8_0cfd936c",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "let\u0027s make those exit code values (2, 1, 0) into constants CRITICAL, WARN and SUCCESS",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc3e00a3_a449cf79",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "48a9aff8_0cfd936c",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf3e2384_c55f2e35",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "10 days sounds like a very short time to rotate the certificates, this should be larger, 30 days is my suggestion, that gives operators ~4 weeks to plan the certificates rotation.",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6136911a_bf946630",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "cf3e2384_c55f2e35",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd5bad5a_282bae4c",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "can you add some CLI option to print the output instead of saving it into the file?, this would be helpful for operators checking their system.",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d512842b_c15097ea",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dd5bad5a_282bae4c",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96353b98_58ac4c2f",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "this would be better served by https://docs.python.org/3/library/datetime.html#datetime.datetime.strftime , you can then use https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime in the other script, extra points if you use isoformat() - https://docs.python.org/3/library/datetime.html#datetime.datetime.fromisoformat",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bb46b9d_46b4b52e",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "sure, it is basically doing this same thing though. i guess its good to use a recognised method so will adapt.",
      "parentUuid": "96353b98_58ac4c2f",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22c72348_b2fb91e5",
        "filename": "src/files/scripts/check_ovn_certs.py",
        "patchSetId": 3
      },
      "lineNbr": 86,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-10-02T18:16:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5bb46b9d_46b4b52e",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b509b2e6_658fa0a5",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "if you add this functionality here, you will need to re-implement it in ovn-dedicated-chassis, maybe this should live in this other place -\u003e https://github.com/openstack-charmers/charm-layer-ovn/blob/master/lib/charms/ovn_charm.py#L429",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a641140_7a25d55b",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T16:00:31Z",
      "side": 1,
      "message": "i\u0027ve switch to using the super class as much as possible here so as not to override",
      "parentUuid": "b509b2e6_658fa0a5",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "221d4c34_44fbe279",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-12-02T16:04:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a641140_7a25d55b",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b1bb2da_5053df69",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "this shouldn\u0027t be here, this should be part of the \"packages\" property",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "662928b8_22e4a869",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "i think i can leverage BaseOVNChassisCharm for this",
      "parentUuid": "9b1bb2da_5053df69",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff319cd2_7b4b145c",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T16:00:31Z",
      "side": 1,
      "message": "against switch to use super().packages",
      "parentUuid": "662928b8_22e4a869",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9a0fbc5c_0f2cae5d",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 69,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-12-02T16:04:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ff319cd2_7b4b145c",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9264ed02_3199e5f3",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 2424
      },
      "writtenOn": "2023-09-26T14:30:17Z",
      "side": 1,
      "message": "I don\u0027t think there is a need of reading certificates to aggressively considering this data piece doesn\u0027t change often enough, maybe running this hourly would be enough.",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35f5618e_11146f1a",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-09-28T14:45:09Z",
      "side": 1,
      "message": "agreed",
      "parentUuid": "9264ed02_3199e5f3",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a13bceb_eddcbfce",
        "filename": "src/lib/charm/openstack/ovn_chassis.py",
        "patchSetId": 3
      },
      "lineNbr": 75,
      "author": {
        "id": 6737
      },
      "writtenOn": "2023-12-02T16:04:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "35f5618e_11146f1a",
      "revId": "9fa87557acc42126537ba9deddf432c562aae9c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}